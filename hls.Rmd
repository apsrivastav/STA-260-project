---
title: "HLS"
author: "Sudesh Srivastav"
date: "5/13/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Download R
```{r}
data<-read.csv("hls.csv")
```

```{r}
str(data)
```

```{r}
### remove restrivted
datasub<- data[sapply(data, function(x) x[1] != -5)]
str(datasub)
```

```{r}
### remove f2 and f3 variables (second and third followups)
datasub1<-datasub[,-c(4,8:11,212:616,1520:1939)]
str(datasub1)
```


### Identification Variables

STU_ID (1), STRAT_ID (2), PSU (3), F1UNIV1 (4), F1UNIV2A (5), F1UNIV2B (6), G10COHRT(7),G12COHRT(8), BYSTUWT(9)

### Variables to Keep

BYSEX (10), BYRACE (11), BYDOB_P (15), BYPARACE (16), BYGNSTAT(22), BYMOTHED(24), BYPATHED (25), BYGPARED (26), BYOCCUM (27), BYOCCUF (28), BYNONUSG (36), BYHOMLIT (37), BYRISKFC (38), BYSTEXP (39), BYPARASP(40), BYSCHPRG(43), BYTXSTAT(46), BYTXACC (53), $\bf BYTXMSTD\ (62)$, $\bf BYTXMSTD\ (70)$, BYCONEXP (77), BYINSTMO(78), BYACTCTL(79), BYSTPREP (80), BYWRTNGA (81), BYNSPORT (96), BYXTRACU (97), BYHMWRK (98), BYTVVIGM (99), BYERACE (102), BYTEHDEG (103), BYMRACE (104), BYTMHDEG (105), BYSCTRL (110), BYURBAN (111), BYREGION (112), BY10FLP (116), F1EVERDO (165), $\bf F1TXMSTD (172)$, F1HIMATH (182)

### Variables to keep 1 after analysis analysis

BYSTLANG (12), BYHOMLNG (13),  or BYSTLNG2 (14)

 BYPARLNG (17) or BYPLANG (18)

BYFCOMP (19), BYSIBSTR (20), or BYSIBHOM (21)

BYSES1 (30) or BYSES2 (32)

BYGRDRPT (34) or BYLGRRPT (35)

BYWORKSY (100) or BYWRKHRS (101)

BYS33A (313) and BYS33B (314) (combine)

### Variables to Delete

BYPARED (23), BYSES1QU (31), BYSES2QU (33), BYOCCHS (41), BYOCC30 (42), BYSQSTAT (44), BYQXDATP (45), BYTEQFLG(47), BYPQSTAT (48), BYTXPAFG (49), BYADMFLG(50), BYLMCFLG (51), BYIEPFLG (52), BYTXCSTD (54), BYTXCQU (55), BYNELS2M (56), BYNELS2R (57), BYNELS0M (58), BYPISAME (59), BYPISARE (60), BYTXMIRR (61), BYTXMQU (63), BYTX1MPP (64), BYTX2MPP (65), BYTX3MPP (66), BYTX4MPP (67), BYTX5MPP (68), BYTXRIRR (69), BYTXRQU (71), BYTX1RPP (72), BYTX2RPP (73), BYTX3RPP (74), BYMATHSE (75), BYENGLSE (76), BYSF1RCE (82), BYSF2RCE (83), BYSF3RCE (84), BYFRRACE (85), BYFRGRIM (86), BYBASEBL (87), BYSOFTBL (88), BYBSKTBL (89), BYFOOTBL (90), BYSOCCER (91), BYTEAMSP (92), BYSOLOSP (93), BYCHRDRL (94), BYTEAQUA (106), BYTSTREL (107), BYG10EP (108), BYSCENP (109), BYREGURB (113), BYREGCTL(114), BYSPANP (115), BYSCSAF1 (117), BYSCSAF2(118), BYACCLIM (119), BYSEXIM (120), BYSTLNIM (121), BYFCMPIM (122), BYMOEDIM (123), BYFAEDIM (124), BYOCCMIM (125), BYOCCFIM (126), BYINCMIM (127), BYSTEXIM (128), BYPASPIM (129), BYSCHPIM (130), BYTESTIM (131), BYMATHIM (132), BYREADIM (133) F1QWT (134), F1PNLWT (135), F1SEX (136), F1RACE (137), F1STLANG (138), F1HOMLNG (139), F1DOB_P  (140), F1FCOMP (141), F1PARED (142),  F1MOTHED (143), F1FATHED (144), F1OCCUM (145), F1OCCUF  (146), F1SES1 (147), F1SES1QU (148), F1SES2 (149), F1SES2QU (150), F1STEXP (151),F1BYEDEX (152), F1OCCHS (153), F1OCC30 (154), F1QSTAT (155), F1TSTAT (156), F1PNLFLG (157), F1BYTFLG (158), F1QMODE (159), F1STQFLG (160), F1TRQFLG (161), F1HOQFLG (162), F1EGQFLG (163), F1DOQFLG (164), F1DOSTAT (166),  F1TXACC (167), F1CTLPTN (168), F1GRADE (169), F1TXMBIR (170), F1TXM1IR (171), F1TXMQU (173), F1NELS2M (174), F1TX1MPP (175), F1TX2MPP (176), F1TX3MPP (177), F1TX4MPP (178), F1TX5MPP (179), F1BYMTGN (180), F1QXDATP (181), Variables 183- 312, 315-2254        
###### 

```{r}
### eliminating variables
datasub2<-datasub1[,-c(23,31,33,41,42,44,45,47,48:52,54:61,63:69,71:76,82:94, 106:109,113:115,117:164, 166:171,173:181, 183:312,315:2254)]
str(datasub2)
```



```{r}
datasub3<- datasub2[,-c(2,3,4:6,8,9, 29:30,35,39,43,48, 62:65) ]
str(datasub3)
```

```{r,message=FALSE,warning=FALSE}
library(dplyr)
datasub4<- mutate(datasub3, BYAPIB = ifelse(as.factor(BYS33A)==c("-9","-8","-7","-6","-4")|as.factor(BYS33B)==c("-9","-8","-7","-6","-4"),"-9",ifelse(as.factor(BYS33A)=="1"|as.factor(BYS33B)=="1", "1","0")))
datasub4$BYAPIB<-as.factor(datasub4$BYAPIB)
summary(datasub4$BYAPIB)
datasub4$BYAPIB<-as.numeric(datasub4$BYAPIB)
```

```{r,message=FALSE,warning=FALSE}
library(plyr)
datasub4$BYERACE<-revalue(as.factor(datasub4$BYERACE), c("-9"="-8"))
summary(datasub4$BYERACE)
datasub5<- mutate(datasub4, BYERCEMTCH = ifelse(as.factor(BYRACE)==c("-8","-4")|BYERACE==c("-8","-4"),"-9",ifelse(as.factor(BYRACE)==BYERACE, "1","0")))
datasub5$BYERCEMTCH<-as.factor(datasub5$BYERCEMTCH)
summary(datasub5$BYERCEMTCH)
datasub5$BYERCEMTCH<-as.numeric(datasub5$BYERCEMTCH)
```



```{r, message=FALSE, warning=FALSE}
library(plyr)
datasub5$BYMRACE<-revalue(as.factor(datasub5$BYMRACE), c("-9"="-8"))
summary(datasub5$BYMRACE)
datasub6<- mutate(datasub5, BYMRCEMTCH = ifelse(as.factor(BYRACE)==c("-8","-4")|BYMRACE==c("-8","-4"),"-9",ifelse(as.factor(BYRACE)==BYMRACE, "1","0")))
datasub6$BYMRCEMTCH<-as.factor(datasub6$BYMRCEMTCH)
summary(datasub6$BYMRCEMTCH)
datasub6$BYMRCEMTCH<-as.numeric(datasub6$BYMRCEMTCH)
```

```{r}
colnames(datasub6)
```


```{r}
fdata<-datasub6[,-c(4,42,44,49,50)]
str(fdata)
attach(fdata)
```

```{r, warning=FALSE, message=FALSE}
## English score results
summary(aov(BYTXRSTD~BYSEX))
summary(aov(BYTXRSTD~BYERCEMTCH))
summary(aov(BYTXRSTD~BYDOB_P))
summary(aov(BYTXRSTD~BYPARACE))
summary(aov(BYTXRSTD~BYFCOMP))
summary(aov(BYTXRSTD~BYMOTHED))
summary(aov(BYTXRSTD~BYFATHED))
summary(aov(BYTXRSTD~BYGPARED))
summary(aov(BYTXRSTD~BYOCCUM))
summary(aov(BYTXRSTD~BYOCCUF))
summary(aov(BYTXRSTD~BYINCOME))
summary(aov(BYTXRSTD~BYNONUSG))
summary(aov(BYTXRSTD~BYHOMLIT))
summary(aov(BYTXRSTD~BYSTEXP))
summary(aov(BYTXRSTD~BYPARASP))
summary(aov(BYTXRSTD~BYSCHPRG))
summary(aov(BYTXRSTD~BYTXACC))
summary(aov(BYTXRSTD~BYINSTMO))
summary(aov(BYTXRSTD~BYACTCTL))
summary(aov(BYTXRSTD~BYSTPREP))
summary(aov(BYTXRSTD~BYWRTNGA))
summary(aov(BYTXRSTD~BYNSPORT))
summary(aov(BYTXRSTD~BYXTRACU))
summary(aov(BYTXRSTD~BYHMWRK))
summary(aov(BYTXRSTD~BYTVVIGM))
summary(aov(BYTXRSTD~BYTEHDEG))
summary(aov(BYTXRSTD~BYSCTRL))
summary(aov(BYTXRSTD~BYURBAN))
summary(aov(BYTXRSTD~BYREGION))
summary(aov(BYTXRSTD~BYAPIB))
```

```{r}
summary(aov(BYTXRSTD~BYSTLANG))
summary(aov(BYTXRSTD~BYHOMLNG))
summary(aov(BYTXRSTD~BYSTLNG2))
```

```{r}
summary(aov(BYTXRSTD~BYPARLNG))
summary(aov(BYTXRSTD~BYPLANG))
```

```{r}
summary(aov(BYTXRSTD~BYSIBSTR))
summary(aov(BYTXRSTD~BYSIBHOM))
```

```{r}
summary(aov(BYTXRSTD~BYGRDRPT))
summary(aov(BYTXRSTD~BYLGRRPT))
```

```{r}
summary(aov(BYTXRSTD~BYWORKSY))
summary(aov(BYTXRSTD~BYWRKHRS))
```


```{r, warning=FALSE, message=FALSE}
## MATH score results
summary(aov(BYTXMSTD~BYSEX))
summary(aov(BYTXMSTD~BYMRCEMTCH))
summary(aov(BYTXMSTD~BYDOB_P))
summary(aov(BYTXMSTD~BYPARACE))
summary(aov(BYTXMSTD~BYFCOMP))
summary(aov(BYTXMSTD~BYMOTHED))
summary(aov(BYTXMSTD~BYFATHED))
summary(aov(BYTXMSTD~BYGPARED))
summary(aov(BYTXMSTD~BYOCCUM))
summary(aov(BYTXMSTD~BYOCCUF))
summary(aov(BYTXMSTD~BYINCOME))
summary(aov(BYTXMSTD~BYNONUSG))
summary(aov(BYTXMSTD~BYHOMLIT))
summary(aov(BYTXMSTD~BYSTEXP))
summary(aov(BYTXMSTD~BYPARASP))
summary(aov(BYTXMSTD~BYSCHPRG))
summary(aov(BYTXMSTD~BYTXACC))
summary(aov(BYTXMSTD~BYINSTMO))
summary(aov(BYTXMSTD~BYACTCTL))
summary(aov(BYTXMSTD~BYSTPREP))
summary(aov(BYTXMSTD~BYNSPORT))
summary(aov(BYTXMSTD~BYXTRACU))
summary(aov(BYTXMSTD~BYHMWRK))
summary(aov(BYTXMSTD~BYTVVIGM))
summary(aov(BYTXMSTD~BYTMHDEG))
summary(aov(BYTXMSTD~BYSCTRL))
summary(aov(BYTXMSTD~BYURBAN))
summary(aov(BYTXMSTD~BYREGION))
summary(aov(BYTXMSTD~BYAPIB))

```

```{r}
summary(aov(BYTXMSTD~BYSTLANG))
summary(aov(BYTXMSTD~BYHOMLNG))
summary(aov(BYTXMSTD~BYSTLNG2))
```

```{r}
summary(aov(BYTXMSTD~BYPARLNG))
summary(aov(BYTXMSTD~BYPLANG))
```

```{r}
summary(aov(BYTXMSTD~BYSIBSTR))
summary(aov(BYTXMSTD~BYSIBHOM))
```

```{r}
summary(aov(BYTXMSTD~BYGRDRPT))
summary(aov(BYTXMSTD~BYLGRRPT))
```

```{r}
summary(aov(BYTXMSTD~BYWORKSY))
summary(aov(BYTXMSTD~BYWRKHRS))
```

```{r}
colnames(fdata)
```


